<!-- 添加自定义 CSS -->
<link rel="stylesheet" href="{{ "css/custom.css" | absURL }}">

<!-- 主题初始化脚本 - 放在头部以避免闪烁 -->
<script>
  // 立即执行主题初始化
  (function() {
    const savedTheme = localStorage.getItem('theme');
    document.documentElement.setAttribute('data-theme', savedTheme || 'light');
  })();
</script>

<!-- 主题切换脚本 - 在 DOMContentLoaded 后执行 -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const themeToggle = document.querySelector('.theme-switch input[type="checkbox"]');
    if (!themeToggle) return;

    // 根据当前主题设置开关状态
    if (document.documentElement.getAttribute('data-theme') === 'dark') {
      themeToggle.checked = true;
    }

    // 监听开关变化
    themeToggle.addEventListener('change', () => {
      const newTheme = themeToggle.checked ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    });
  });
</script>

<!-- 添加标准页面样式 -->
<link rel="stylesheet" href="{{ "css/standards.css" | absURL }}">

<!-- GitHub Markdown 样式 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.2.0/github-markdown.min.css">

<!-- Markdown 内容样式 -->
<style>
.markdown-body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    margin: 0 auto;
    padding: 20px;
    color: var(--text-color);
    background-color: var(--bg-color);
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
    color: var(--heading-color);
    margin-top: 24px;
    margin-bottom: 16px;
}

.markdown-body p {
    margin-bottom: 16px;
    line-height: 1.6;
}

@media (max-width: 767px) {
    .markdown-body {
        padding: 15px;
    }
}
</style>

<!-- Favicon -->
<link rel="icon" href="{{ "favicon.ico" | absURL }}">
<link rel="apple-touch-icon" href="{{ "apple-touch-icon.png" | absURL }}">

<!-- RSS -->
{{ range .AlternativeOutputFormats -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
{{ end -}}
