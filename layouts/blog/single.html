{{ define "main" }}
<link rel="stylesheet" href="/css/blog/style.css">

<article class="blog-post">
    <div class="post-header">
        <h1 class="post-title">{{ .Title }}</h1>
        <div class="post-meta">
            <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
            {{ with .Params.author }} • <span class="post-author">{{ . }}</span>{{ end }}
            {{ with .Params.categories }}
            • <span class="post-categories">
                {{ range . }}
                <span class="category">{{ . }}</span>
                {{ end }}
            </span>
            {{ end }}
        </div>
    </div>

    {{ with .Params.featured_image }}
    <div class="post-featured-image">
        <img src="{{ . }}" alt="{{ $.Title }}">
    </div>
    {{ end }}

    {{ if .Params.toc }}
    <div class="table-of-contents">
        <h2>目录</h2>
        {{ .TableOfContents }}
    </div>
    {{ end }}

    <div class="post-content">
        {{ .Content }}
    </div>

    <div class="post-footer">
        {{ with .Params.tags }}
        <div class="post-tags">
            {{ range . }}
            <span class="tag">#{{ . }}</span>
            {{ end }}
        </div>
        {{ end }}

        {{ if .Params.comments }}
        <div class="post-comments">
            <!-- 这里可以添加评论系统 -->
            <div id="comments">
                <!-- 评论系统将在这里加载 -->
            </div>
        </div>
        {{ end }}
    </div>
</article>

{{ if .Params.math }}
<!-- 添加数学公式支持 -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true
        }
    };
</script>
{{ end }}
{{ end }}
