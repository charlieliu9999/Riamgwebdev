{{ define "header" }}
{{ partial "site-header.html" . }}
{{ end }}

{{ define "main" }}
<div class="standards-wrapper">
    <!-- 移动端菜单按钮 -->
    <button class="menu-toggle" id="menuToggle">
        <span>☰ 菜单</span>
    </button>

    <!-- 左侧导航栏 -->
    <aside class="standards-sidebar" id="standardsSidebar">
        <h3>标准文档导航</h3>
        <ul class="standards-nav">
            {{ range .Pages.ByWeight }}
            <li>
                <a href="#" class="standard-link" 
                   data-content="{{ .Content | jsonify }}" 
                   data-title="{{ .Title }}">
                    {{ .Title }}
                </a>
            </li>
            {{ end }}
        </ul>
    </aside>

    <!-- 右侧内容区 -->
    <main class="standards-content markdown-body">
        <div id="content-container">
            {{ if .Pages }}
                {{ range first 1 .Pages.ByWeight }}
                    {{ .Content | safeHTML }}
                {{ end }}
            {{ else }}
                {{ .Content | safeHTML }}
            {{ end }}
        </div>
    </main>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const links = document.querySelectorAll('.standard-link');
    const contentContainer = document.getElementById('content-container');
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('standardsSidebar');

    // 移动端菜单切换
    menuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('active');
    });

    // 内容切换
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            links.forEach(l => l.classList.remove('active'));
            this.classList.add('active');
            // 解析 JSON 格式的内容
            contentContainer.innerHTML = JSON.parse(this.dataset.content);
            
            // 在移动端点击链接后自动关闭菜单
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('active');
            }
        });
    });

    // 初始化显示第一个内容
    if (links.length > 0) {
        links[0].click();
    }
});
</script>
{{ end }} 